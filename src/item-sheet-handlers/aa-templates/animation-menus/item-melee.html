<div style='padding:3px'>

</div>
<div div class='flexrow aa-section-label text-green'>
    <label style="font-size: large;">{{localize "AUTOANIM.primary"}} {{localize
        "AUTOANIM.animation"}}</label>
</div>
<div class="aa-itemSection-divider">
    <div class="aa-primary-container">
        <div class='flexcol' style='grid-row: 1 / 2;grid-column: 2 / 3;'>
            <label>{{localize 'AUTOANIM.type'}}</label>
            <select name="flags.autoanimationsmodded.options.menuType" {{#if flags.autoanimationsmodded.options.enableCustom}}
                disabled {{/if }}>
                {{#select flags.autoanimationsmodded.options.menuType}}
                <option value=""> </option>
                {{#each menuTypes.melee as |name key|}}
                <option value="{{key}}">{{name}}</option>
                {{/each}}
                {{/select}}
            </select>
        </div>
        <!--Choose Animation by Name-->
        <div class='flexcol' style='grid-row: 2 / 3;grid-column: 1 / 2;'>
            <label>{{localize "AUTOANIM.animation"}}</label>
            <select name="flags.autoanimationsmodded.animation" {{#if flags.autoanimationsmodded.options.enableCustom}} disabled
                {{/if }}>
                {{#select flags.autoanimationsmodded.animation}}
                <option value=""></option>
                {{#each (lookup menuNames.melee (lookup flags.autoanimationsmodded.options 'menuType')) as |name key|}}
                <option value="{{key}}">{{name}}</option>
                {{/each}}
                {{/select}}
            </select>
        </div>
        <!--Choose Unarmed Strike Type (Magical or Physical)-->
        <!--CHANGED uaStrikeType TO options.variant-->
        <div class='flexcol' style='grid-row: 2 / 3;grid-column: 2 / 3;'>
            <label>{{localize "AUTOANIM.variant"}}</label>
            <select name="flags.autoanimationsmodded.options.variant" {{#if flags.autoanimationsmodded.options.enableCustom}}
                disabled {{/if }}>
                {{#select flags.autoanimationsmodded.options.variant}}
                <option value=""> </option>
                {{#each (lookup (lookup menuVariants.melee flags.autoanimationsmodded.options.menuType) flags.autoanimationsmodded.animation) as |name key|}}
                <option value="{{key}}">{{name}}</option>
                {{/each}}
                {{/select}}
            </select>
        </div>
        <div class='flexcol' style='grid-row: 2 / 3;grid-column: 3 / 4;'>
            <label>{{localize "AUTOANIM.color"}}</label>
            <select name="flags.autoanimationsmodded.color" {{#if flags.autoanimationsmodded.options.enableCustom}} disabled {{/if
                }}>
                {{#select flags.autoanimationsmodded.color}}
                <option value=""> </option>
                {{#each (lookup (lookup (lookup menuColors.melee flags.autoanimationsmodded.options.menuType) flags.autoanimationsmodded.animation) flags.autoanimationsmodded.options.variant) as |name key|}}
                <option value="{{key}}">{{name}}</option>
                {{/each}}
                {{/select}}
            </select>
        </div>
    </div>
    <div class="aa-customAnim-container">
        <!--Add Custom Animation-->
        <div class='form-group' style='justify-self: left;grid-row: 1 / 2; grid-column: 1 / 2;'>
            <label>{{localize "AUTOANIM.custom"}}: </label>
            <input type="checkbox" name="flags.autoanimationsmodded.options.enableCustom" {{checked
                flags.autoanimationsmodded.options.enableCustom}}>
        </div>
        {{#if flags.autoanimationsmodded.options.enableCustom}}
        <div class="form-group" style='grid-row: 1 / 2; grid-column: 2 / 5;'>
            <input type="text" class="files" name="flags.autoanimationsmodded.options.customPath"
                value="{{flags.autoanimationsmodded.options.customPath}}">
            <button type="button" class="file-picker" data-type="image/video"
                data-target="flags.autoanimationsmodded.options.customPath" tabindex="-1" title="Browse Files">
                <i class="fas fa-file-video"></i>
            </button>
        </div>
        {{/if}}
    </div>
    <div class='flexrow aa-section-label'>
        <label style="font-size: large;">{{localize "AUTOANIM.options"}}</label>
    </div>
    <div class="aa-subSection-divider"></div>
    <div class="aa-options-odd aa-options-settings">
        <div class="flexcol" style='grid-row: 1 / 2; grid-column: 1 / 2;'>
            <label>{{localize "AUTOANIM.repeat"}}</label>
            <input type="Number" name="flags.autoanimationsmodded.options.repeat"
                value="{{flags.autoanimationsmodded.options.repeat}}" data-dtype="Number" placeholder=1>
        </div>
        <div class="flexcol" style='grid-row: 1 / 2; grid-column: 3 / 4;'>
            <label>{{localize 'AUTOANIM.repeat'}} {{localize 'AUTOANIM.delay'}}</label>
            <input type="Number" name="flags.autoanimationsmodded.options.delay"
                value="{{flags.autoanimationsmodded.options.delay}}" data-dtype="Number" placeholder=250>
        </div>
        <div class="flexcol" style='grid-row: 1 / 2; grid-column: 5 / 6;'>
            <label>{{localize "AUTOANIM.scale"}}</label>
            <input type="Number" name="flags.autoanimationsmodded.options.scale"
                value="{{flags.autoanimationsmodded.options.scale}}" data-dtype="Number" placeholder=1>
        </div>
    </div>
    <div class='aa-checkbox-label' style="text-align: center;">
        <div class='form-group' style='grid-row: 1 / 2; grid-column: 2 / 3;'>
            <label style="font-size: large;">{{localize "AUTOANIM.primary"}} {{localize
                "AUTOANIM.sound"}}</label>
            <input type="checkbox" name="flags.autoanimationsmodded.audio.a01.enable" {{checked
                flags.autoanimationsmodded.audio.a01.enable}}>
        </div>
    </div>
    <div class="aa-subSection-divider"></div>
    {{#if flags.autoanimationsmodded.audio.a01.enable}}
    <div class="aa-options-odd aa-options-settings">
        <!--Audio filePicker and Text Input-->
        <div class='form-group' style='grid-row: 1 / 2;grid-column: 1 / 6;'>
            <input type="text" class="files" name="flags.autoanimationsmodded.audio.a01.file"
                value="{{flags.autoanimationsmodded.audio.a01.file}}" style='text-align: start;'>
            <button type="button" class="file-picker" data-type="audio"
                data-target="flags.autoanimationsmodded.audio.a01.file" tabindex="-1" title="Browse Files">
                <i class="fas fa-music"></i>
            </button>
        </div>
        <!--Set Sound Start Time-->
        <div class="flexcol" style='grid-row: 2 / 3;grid-column: 1 / 2;'>
            <label>{{localize "AUTOANIM.start"}} {{localize "AUTOANIM.time"}}</label>
            <input type="Number" name="flags.autoanimationsmodded.audio.a01.startTime" step="1"
                value="{{flags.autoanimationsmodded.audio.a01.startTime}}" placeholder=0>
        </div>
        <!--Audio Volume-->
        <div class="flexcol" style='grid-row: 2 / 3;grid-column: 3 / 4;'>
            <label>{{localize "AUTOANIM.volume"}}</label>
            <input type="Number" name="flags.autoanimationsmodded.audio.a01.volume" min="0" max="1" step="0.01"
                value="{{flags.autoanimationsmodded.audio.a01.volume}}" placeholder=0.5>
        </div>
        <!--Audio Delay-->
        <div class="flexcol" style='grid-row: 2 / 3;grid-column: 5 / 6;'>
            <label>{{localize "AUTOANIM.delay"}}</label>
            <input type="Number" name="flags.autoanimationsmodded.audio.a01.delay" min="0"
                value="{{flags.autoanimationsmodded.audio.a01.delay}}" placeholder=0>
        </div>
    </div>
    {{/if}}
    <div class='aa-checkbox-label' style="text-align: center;">
        <div class='form-group' style='grid-row: 1 / 2; grid-column: 2 / 3;'>
            <label style="font-size: large;">{{localize "AUTOANIM.animPreview"}}</label>
            <input type="checkbox" name="flags.autoanimationsmodded.preview" {{checked flags.autoanimationsmodded.preview}}>
        </div>
    </div>
    <div class="aa-subSection-divider"></div>
    {{#if flags.autoanimationsmodded.preview}}
    <div class="aa-video">
        {{{content}}}
    </div>
    {{/if}}
</div>
<div style='padding:3px'>

</div>
<div class='flexrow  aa-section-label text-green' {{#ifEquals flags.autoanimationsmodded.meleeSwitch.switchType 'off' }}
    style='text-shadow: 1px 1px 2px lightpink, 0 0 25px red, 0 0 5px orangered;text-align: center;' {{/ifEquals}}
    {{#ifEquals flags.autoanimationsmodded.meleeSwitch.switchType 'custom' }}
    style='text-shadow: 0 0 5px orange;text-align: center;' {{/ifEquals}}>
    <label style="font-size: large;">{{localize "AUTOANIM.melee"}} -- {{localize
        "AUTOANIM.ranged"}} {{localize "AUTOANIM.switch"}}</label>
</div>
<div class="aa-itemSection-divider">
    <div class="aa-switch-container">
        <div class='flexcol' style='grid-row: 1 / 2; grid-column: 2 / 3;'>
            <label>{{localize 'AUTOANIM.ranged'}} {{localize 'AUTOANIM.switch'}}</label>
            <select name="flags.autoanimationsmodded.meleeSwitch.switchType">
                {{#select flags.autoanimationsmodded.meleeSwitch.switchType}}
                <option value="on">Enabled</option>
                <option value="off">Disabled</option>
                <option value="custom">Custom</option>
                {{/select}}
            </select>
        </div>
        {{#ifnoteq flags.autoanimationsmodded.meleeSwitch.switchType 'off'}}
        <div class="flexcol" style='grid-row: 1 / 2; grid-column: 3 / 4;'>
            <label>{{localize "AUTOANIM.return"}}</label>
            <input type="checkbox" name="flags.autoanimationsmodded.meleeSwitch.returning" {{checked
                flags.autoanimationsmodded.meleeSwitch.returning}}>
        </div>
        {{/ifnoteq}}
        {{#ifEquals flags.autoanimationsmodded.meleeSwitch.switchType 'custom'}}
        <div class='flexcol' style='grid-row: 2 / 3;grid-column: 2 / 3;'>
            <label>{{localize 'AUTOANIM.type'}}</label>
            <select name="flags.autoanimationsmodded.meleeSwitch.menuType">
                {{#select flags.autoanimationsmodded.meleeSwitch.menuType}}
                <option value=""> </option>
                {{#each menuTypes.range as |name key|}}
                <option value="{{key}}">{{name}}</option>
                {{/each}}
                {{/select}}
            </select>
        </div>
        <div class="flexcol" style='grid-row: 3 / 4; grid-column: 1 / 2;'>
            <label>{{localize "AUTOANIM.animation"}}</label>
            <select name="flags.autoanimationsmodded.meleeSwitch.animation">
                {{#select flags.autoanimationsmodded.meleeSwitch.animation}}
                <option value=""></option>
                {{#each (lookup menuNames.range flags.autoanimationsmodded.meleeSwitch.menuType) as |name key|}}
                <option value="{{key}}">{{name}}</option>
                {{/each}}
                {{/select}}
            </select>
        </div>
        <!--REMOVED rangeDmgType AND rangeVar, now only VARIANT-->
        <div class='flexcol' style='grid-row: 3 / 4; grid-column: 2 / 3;'>
            <label>{{localize "AUTOANIM.variant"}}</label>
            <select name="flags.autoanimationsmodded.meleeSwitch.variant">
                {{#select flags.autoanimationsmodded.meleeSwitch.variant}}
                <option value=""> </option>
                {{#each (lookup (lookup menuVariants.range flags.autoanimationsmodded.meleeSwitch.menuType) flags.autoanimationsmodded.meleeSwitch.animation) as |name key|}}
                <option value="{{key}}">{{name}}</option>
                {{/each}}
                {{/select}}
            </select>
        </div>
        <!--Choose Standard Animation Color-->
        <div class='flexcol' style='grid-row: 3 / 4; grid-column: 3 / 4;'>
            <label>{{localize "AUTOANIM.color"}}</label>
            <select name="flags.autoanimationsmodded.meleeSwitch.color">
                {{#select flags.autoanimationsmodded.meleeSwitch.color}}
                <option value=""> </option>
                {{#each (lookup (lookup (lookup menuColors.range flags.autoanimationsmodded.meleeSwitch.menuType) flags.autoanimationsmodded.meleeSwitch.animation) flags.autoanimationsmodded.meleeSwitch.variant) as |name key|}}
                <option value="{{key}}">{{name}}</option>
                {{/each}}
                {{/select}}
            </select>
        </div>
        <div class="flexcol" style='grid-row: 4 / 5; grid-column: 1 / 2;'>
            <label>{{localize "AUTOANIM.rangeDetect"}}</label>
            <select name="flags.autoanimationsmodded.meleeSwitch.detect">
                {{#select flags.autoanimationsmodded.meleeSwitch.detect}}
                <option value="auto">Automatic</option>
                <option value="manual">Manual</option>
                {{/select}}
            </select>
        </div>
        {{#ifEquals flags.autoanimationsmodded.meleeSwitch.detect 'manual'}}
        <div class="flexcol" style='grid-row: 4 / 5; grid-column: 2 / 4;'>
            <label>{{localize "AUTOANIM.gridSquares"}}</label>
            <input style='width: 9em' type="number" name="flags.autoanimationsmodded.meleeSwitch.range"
                value="{{flags.autoanimationsmodded.meleeSwitch.range}}" data-dtype="Number" placeholder=2>
        </div>
        {{/ifEquals}}
        {{/ifEquals}}
    </div>
    {{#ifnoteq (lookup (lookup ../settings.aaAutorec.melee idx) 'switchType') 'off'}}
    <div class='aa-checkbox-label' style="text-align: center;">
        <div class='form-group' style='grid-row: 1 / 2; grid-column: 2 / 3;'>
            <label style="font-size: large;">{{localize "AUTOANIM.switch"}} {{localize
                "AUTOANIM.sound"}}</label>
            <input type="checkbox" name="flags.autoanimationsmodded.audio.a02.enable" {{checked
                flags.autoanimationsmodded.audio.a02.enable}}>
        </div>
    </div>
    <div class="aa-subSection-divider"></div>
    {{#if flags.autoanimationsmodded.audio.a02.enable}}
    <div class="aa-options-odd aa-options-settings">
        <!--Audio filePicker and Text Input-->
        <div class='form-group' style='grid-row: 1 / 2;grid-column: 1 / 6;'>
            <input type="text" class="files" name="flags.autoanimationsmodded.audio.a02.file"
                value="{{flags.autoanimationsmodded.audio.a02.file}}" style='text-align: start;'>
            <button type="button" class="file-picker" data-type="audio"
                data-target="flags.autoanimationsmodded.audio.a02.file" tabindex="-1" title="Browse Files">
                <i class="fas fa-music"></i>
            </button>
        </div>
        <!--Set Sound Start Time-->
        <div class="flexcol" style='grid-row: 2 / 3;grid-column: 1 / 2;'>
            <label>{{localize "AUTOANIM.start"}} {{localize "AUTOANIM.time"}}</label>
            <input type="Number" name="flags.autoanimationsmodded.audio.a02.startTime" step="1"
                value="{{flags.autoanimationsmodded.audio.a02.startTime}}" placeholder=0>
        </div>
        <!--Audio Volume-->
        <div class='flexcol' style='grid-row: 2 / 3;grid-column: 3 / 4;'>
            <label>{{localize "AUTOANIM.volume"}}</label>
            <input type="Number" name="flags.autoanimationsmodded.audio.a02.volume" min="0" max="1" step="0.01"
                value="{{flags.autoanimationsmodded.audio.a02.volume}}" placeholder=0.5>
        </div>
        <!--Audio Delay-->
        <div class='flexcol' style='grid-row: 2 / 3;grid-column: 5 / 6;'>
            <label>{{localize "AUTOANIM.delay"}}</label>
            <input type="Number" name="flags.autoanimationsmodded.audio.a02.delay" min="0"
                value="{{flags.autoanimationsmodded.audio.a02.delay}}" placeholder=0>
        </div>
    </div>
    {{/if}}
    {{/ifnoteq}}
</div>
<div style='padding:3px'>

</div>
{{> 'modules/autoanimations-modded/src/item-sheet-handlers/aa-templates/animation-menus/add-explosion.html' }}